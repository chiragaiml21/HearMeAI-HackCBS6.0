{% extends "dashboard/base.html" %}
{% load static %}

{% block extra_css %}
<style>
    .blink_me {
        animation: blinker 1s linear infinite;
    }

    @keyframes blinker {
        50% {
            opacity: 0.3;
        }
    }
</style>
{% endblock extra_css %}

{% block body %}

<div class="container-fluid">

    <div class="card">
        <div class="card-body  mt-n3 mb-n4">
            <h5 class="card-title fw-semibold">Play Games With Us🎯 (5 Points)</h5>
        </div>
    </div>


    <!-- Card -->
    <div class="card overflow-hidden">
        <!-- Tab Content -->
        <div class="tab-content" id="leaderboardTabContent">

            <div class="tab-pane fade show active" id="all-time" role="tabpanel" aria-labelledby="all-time-tab">
                <!-- Table -->
                <div class="table-responsive">

                    <table
                        class="table table-borderless table-thead-bordered table-nowrap table-text-center align-middle card-table">
                        <thead class="thead-light align-middle align-items-center">
                            <tr style="border-bottom: 0.5px solid rgba(126, 126, 126, 0.42)">
                                <th scope="col">Rank</th>
                                <th scope="col">Name</th>
                                <!-- <th scope="col">Closed issues</th> -->
                                <th scope="col">POINTS</th>
                                <!-- <th scope="col">Progress</th> -->
                                <!-- <th scope="col">Efficiency rate</th> -->
                                <th scope="col">Average Points</th>
                                <th scope="col">Avg. Score</th>
                                <th>Badges</th>
                            </tr>
                        </thead>

                        <tbody>

                            <!-- =================================== TOP STUDENTS ================================= -->

                            {% for c_student in top_students %}

                            {% if c_student == student %}

                            <tr class="bg-success text-dark blink_me">

                                {% else %}

                            <tr>

                                {% endif %}
                                <td><span class="text-warning"
                                        style="font-size: 1.5rem;">&#12935{{forloop.counter}};</span></td>
                                <td class="table-text-start">
                                    <a class="d-flex align-items-center" href="user-profile.html">
                                        <div class="avatar avatar-circle">
                                            <img class="avatar-img" src="{{ c_student.avatar.image.url }}" width="35"
                                                height="35" alt="Image Description">
                                        </div>
                                        <div class="ms-3">
                                            <span class="d-block h5 text-inherit mb-0">{{ c_student.first_name }}
                                                {{c_student.last_name }}</span>
                                        </div>
                                    </a>
                                </td>
                                <!-- <td>20</td> -->
                                <td>{{ c_student.points }}</td>
                                <td>35</td>
                                <td>
                                    {% if c_student == student %}
                                    <span class="badge bg-soft-success text-dark p-1">
                                        {% else %}
                                        <span class="badge bg-soft-success text-success p-1">
                                            {% endif %}


                                            <i class="bi-graph-up"></i> 1.5%
                                        </span>
                                </td>

                                <td>
                                    <div class="chartjs-custom d-flex" style="height: 2rem; width: 5rem;">

                                        {% if c_student.badges.all %}
                                            {% for badge in c_student.badges.all %}
                                            <img src="{{ badge.image.url }}" alt="{{ badge.name }}" width="100%" height="100%">
                                            {% endfor %}
                                        
                                        {% else %}
                                            <div class="text-danger text-center">No Badges Earned</div>
                                        {% endif %}

                                    </div>
                                </td>

                                <!-- <td>505</td> -->

                            </tr>

                            {% endfor %}

                            <!-- =================================== REST STUDENTS ================================= -->

                            {% for c_student in rest_students %}

                            {% if c_student == student %}

                            <tr class="bg-success text-dark blink_me">

                                {% else %}

                            <tr>

                                {% endif %}
                                <td>4</td>
                                <td class="table-text-start">
                                    <a class="d-flex align-items-center" href="user-profile.html">
                                        <div class="avatar avatar-circle">
                                            <img class="avatar-img" src="{{ c_student.avatar.image.url }}" width="35"
                                                height="35" alt="Image Description">
                                        </div>
                                        <div class="ms-3">
                                            <span class="d-block h5 text-inherit mb-0">{{ c_student.first_name }} {{ nc_student.last_name }}</span>
                                        </div>
                                </td>
                                <td>{{ c_student.points }}</td>
                                <td>25</td>

                                <td>
                                    {% if c_student == student %}
                                    <span class="badge bg-soft-success text-dark p-1">
                                        {% else %}
                                        <span class="badge bg-soft-success text-success p-1">
                                            {% endif %}


                                            <i class="bi-graph-up"></i> 1.5%
                                        </span>
                                </td>

                                <td>
                                    <div class="chartjs-custom d-flex" style="height: 2rem; width: 5rem;">

                                        {% if c_student.badges.all %}
                                            {% for badge in c_student.badges.all %}
                                            <img src="{{ badge.image.url }}" alt="{{ badge.name }}" width="100%" height="100%">
                                            {% endfor %}
                                        
                                        {% else %}
                                            <div class="text-danger text-center">No Badges Earned</div>
                                        {% endif %}


                                    </div>
                                </td>


                                <!-- <td>372</td> -->

                            </tr>


                            {% endfor %}





                        </tbody>

                    </table>
                </div>
            </div>
        </div>

    </div>
</div>


{% endblock body %}